(function() {
  module.exports = function(filepath, base = ".", verbose) {
    var id, mod, ref, results;
    if ((mod = require.cache[filepath]) != null) {
      delete require.cache[filepath];
      if (verbose) {
        console.log(`deleted cache for ${filepath}`);
      }
      results = [];
      while ((id = (ref = mod.parent) != null ? ref.id : void 0) !== base) {
        delete require.cache[id];
        if (verbose) {
          console.log(`deleted cache for ${id}`);
        }
        results.push(mod = mod.parent);
      }
      return results;
    }
  };

}).call(this);
